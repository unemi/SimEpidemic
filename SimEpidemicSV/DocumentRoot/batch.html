<html>
<head>
<meta charset="utf-8"/>
<title>SimEpidemic noGUITest: BatchJob</title>
<script type="text/javascript">
function getJobID(ifrm) {
	const plainTextObjs = ifrm.contentDocument.getElementsByTagName('pre');
	if (plainTextObjs.length == 0) return;
	const jobID = plainTextObjs[0].innerText;
	const jobIDs = document.getElementsByClassName('JobID');
	for (var i = 0; i < jobIDs.length; i ++)
		jobIDs[i].value = jobID;
}
</script>
</head>
<body>
<h1>BatchJob</h1>
<h2>Submission</h2>
<form method="post" action="/submitJob" target="submission">
	<textarea name="job" rows="10" cols="60">
{"stopAt":50,"n":1,
"vaccines":[
  {"name":"PfBNT","Original":0.53},
  {"name":"Boost","Original":0.75,"intervalOn":false}],
"params":{"vaccinationInfo":[{"performRate":10,"priority":1}],
  "workPlaceMode":1,"familyModeOn":true},
"scenario":[
"days >= 200",["vaccinePriority Boost",4],
["vaccinePerformRate Boost",8,1]
],
"out":[
	"asymptomatic","symptomatic","recovered","died","vaccinated","vaccination",
	"dailyTestPositive","dailyTestNegative","reproductionRate",
	"incubasionPeriod","recoveryPeriod","fatalPeriod","infects","saveState"]}
	</textarea>
<!-- {"stopAt":200,"n":2,
"gatherings":[
{"name":"kinderGarden","minAge":3,"maxAge":6,"participation":80,
  "duration":4,"freq":5,"npp":30,"size":20,"strength":50},
{"name":"office","minAge":18,"maxAge":65,"participation":50,
  "duration":12,"freq":5,"npp":3,"size":80,"strength":80}],
"params":{"vaccinePerformRate":8,"vaccinePriority":0},
"out":[
	"asymptomatic","symptomatic","recovered","died",
	"dailyTestPositive","dailyTestNegative","reproductionRate",
	"incubasionPeriod","recoveryPeriod","fatalPeriod","infects","saveState"]}
{"stopAt":600,"n":1,"loadState":"Omicron2204AC345_6",
"vaccines":[
  {"name":"PfBNT","Omicron":0.53},
  {"name":"Boost","Omicron":0.75,"Original":0.9,"Alpha":0.9,"Delta":0.9,
   "intervalOn":false}],
"scenario":[
"days > 345",["vaccinePriority Boost",4],
["vaccinePerformRate Boost",1,1]
],
"out":[
	"asymptomatic","symptomatic","recovered","died",
	"dailyTestPositive","dailyTestNegative","reproductionRate",
	"incubasionPeriod","recoveryPeriod","fatalPeriod","infects","saveState"]}
-->
	<input type="submit" value="投入">
	</form>
<iframe name="submission" height=24 onload="getJobID(this);"></iframe>
<hr/>
<h2>Job Status / Stop</h2>
<form method="get" target="jobStatus">
	Job ID: <input class="JobID" type="text" name="job">
	<input type="checkbox" name="worlds" id="worlds">
	<label for="worlds">Include World IDs</label>
	<input type="submit" value="状態" formaction="/getJobStatus">
	<input type="submit" value="実行中止" formaction="/stopJob">
</form>
<iframe name="jobStatus" height=52 width=500></iframe>
<hr/>
<h2>Job Results</h2>
<form method="get" action="/getJobResults" target="jobResults">
	Job ID: <input class="JobID" type="text" name="job">
	<input type="submit" value="結果">
</form>
<iframe name="jobResults" width=500></iframe>
<hr/>
<form method="get" action="/getJobResults" target="jobResultSave">
	Job ID: <input class="JobID" type="text" name="job">
	File to save: <input type="text" name="save" value="MyResult">
	<input type="submit" value="保存">
</form>
<iframe name="jobResultSave" height=24></iframe>
<hr/>
</body>
</html>
